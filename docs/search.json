[{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Ista Zahn. Maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Zahn (2023). BPSTranspoReportR: Generate reports needed BPS Transportation. R package version 0.1.0.","code":"@Manual{,   title = {BPSTranspoReportR: Generate reports needed by BPS Transportation},   author = {Ista Zahn},   year = {2023},   note = {R package version 0.1.0}, }"},{"path":"/index.html","id":"bpstransporeportr","dir":"","previous_headings":"","what":"Generate reports needed by BPS Transportation","title":"Generate reports needed by BPS Transportation","text":"goal BPSTranspoReportR provide easy use functions querying formatting data Versatrans Routing & Planning database.","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Generate reports needed by BPS Transportation","text":"BPSTranspoReportR currently available shared Google Drive folder. don’t think easy way install update directly , need download/sync shared drive local disk install . downloaded/synced drive directory can install package Eventually move package Github able install development version BPSTranspoReportR [GitHub :","code":"remotes::install_local(\"<path/to/directory>\") # install.packages(\"devtools\") devtools::install_github(\".../BPSTranspoReportR\")"},{"path":"/index.html","id":"using-without-installation","dir":"","previous_headings":"","what":"Using without installation","title":"Generate reports needed by BPS Transportation","text":"far functions defined single file, monitors_studet_file.R, may download/sync google drive instructed simply source file using without installation must install dependencies dplyr, tidyr, DBI, odbc manually.","code":"source(\"<path/to/directory>/monitors_student_file.R\")"},{"path":"/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Generate reports needed by BPS Transportation","text":"basic example shows retrieve student monitor file Versatrans RP database: Use format = wide full compatibility monitor student file produced RP export:","code":"library(BPSTranspoReportR) ## or source(\"BPSTranspoReportR/R/monitors_student_file.R\")  student_monitor <- rp_report_student_monitor(database = \"Sandbox\", format = \"long\")  ## example pickup data: dplyr::glimpse( dplyr::select(   student_monitor,   -dplyr::contains(\"ID\"), -dplyr::contains(\"Last\"), -dplyr::contains(\"First\"))) #> Rows: 207,702 #> Columns: 10 #> $ `Program Description`  <chr> \"DR DOOR FULL DAY\", \"DR DOOR FULL DAY\", \"DR DOO… #> $ `INFO WC`              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ `INFO NEED MONITOR`    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ `School Abbrev`        <chr> \"0335\", \"0335\", \"0420\", \"0420\", \"0420\", \"0420\",… #> $ `School Anchor Abbrev` <chr> \"0335\", \"0335\", \"0420\", \"0420\", \"0420\", \"0420\",… #> $ `School Name`          <chr> \"Farr Acad\", \"Farr Acad\", \"LANDMARK HS\", \"LANDM… #> $ Day                    <chr> NA, NA, \"H\", \"H\", \"F\", \"F\", \"M\", \"M\", \"T\", \"T\",… #> $ Shift                  <chr> \"Pickup\", \"Dropoff\", \"Pickup\", \"Dropoff\", \"Pick… #> $ Route                  <chr> NA, NA, \"04201451\", \"04200451\", \"04201451\", \"04… #> $ Bus                    <chr> NA, NA, \"7D036\", \"7D036\", \"7D036\", \"7D036\", \"7D… library(BPSTranspoReportR)  student_monitor <- rp_report_student_monitor(database = \"Sandbox\", format = \"wide\")  ## example pickup data: dplyr::glimpse( dplyr::select(   student_monitor,   -dplyr::contains(\"ID\"), -dplyr::contains(\"Last\"), -dplyr::contains(\"First\"))) #> Rows: 21,421 #> Columns: 26 #> $ `Program Description`  <chr> \"DR DOOR FULL DAY\", \"DR DOOR FULL DAY\", \"DR DOO… #> $ `INFO WC`              <chr> NA, NA, NA, NA, NA, NA, \"WC\", NA, NA, NA, NA, N… #> $ `INFO NEED MONITOR`    <chr> NA, NA, \"M\", \"M\", NA, NA, \"1\", NA, \"M\", NA, NA,… #> $ `School Abbrev`        <chr> \"0335\", \"0420\", NA, \"0641\", \"0517\", \"0292\", \"06… #> $ `School Anchor Abbrev` <chr> \"0335\", \"0420\", NA, \"0641\", \"0517\", \"0292\", \"06… #> $ `School Name`          <chr> \"Farr Acad\", \"LANDMARK HS\", \"CENTRAL MA PREP CO… #> $ `Mon. Pickup Bus`      <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Mon. Pickup Route`    <chr> NA, \"04201451\", NA, \"06411451\", NA, NA, \"065925… #> $ `Mon. Dropoff Bus`     <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Mon. Dropoff Route`   <chr> NA, \"04200451\", NA, \"06419451\", NA, NA, \"065995… #> $ `Tue. Pickup Bus`      <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Tue. Pickup Route`    <chr> NA, \"04201451\", NA, \"06411451\", NA, NA, \"065925… #> $ `Tue. Dropoff Bus`     <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Tue. Dropoff Route`   <chr> NA, \"04200451\", NA, \"06419451\", NA, NA, \"065995… #> $ `Wed. Pickup Bus`      <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Wed. Pickup Route`    <chr> NA, \"04201451\", NA, \"06411451\", NA, NA, \"065925… #> $ `Wed. Dropoff Bus`     <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Wed. Dropoff Route`   <chr> NA, \"04200451\", NA, \"06419451\", NA, NA, \"065995… #> $ `Thu. Pickup Bus`      <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Thu. Pickup Route`    <chr> NA, \"04201451\", NA, \"06411451\", NA, NA, \"065925… #> $ `Thu. Dropoff Bus`     <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Thu. Dropoff Route`   <chr> NA, \"04200451\", NA, \"06419451\", NA, NA, \"065975… #> $ `Fri. Pickup Bus`      <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Fri. Pickup Route`    <chr> NA, \"04201451\", NA, \"06411451\", NA, NA, \"065925… #> $ `Fri. Dropoff Bus`     <chr> NA, \"7D036\", NA, \"MS012\", NA, NA, \"WB960\", \"7D0… #> $ `Fri. Dropoff Route`   <chr> NA, \"04200451\", NA, \"06419451\", NA, NA, \"065995…"},{"path":"/reference/otp_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a on-time performance report — otp_report","title":"Generate a on-time performance report — otp_report","text":"Retrieves combines data Zonar Versatrans generates full OTP data. full schedule OTP data returned, need summarized public reporting.","code":""},{"path":"/reference/otp_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a on-time performance report — otp_report","text":"","code":"otp_report(   date = as.character(Sys.Date()),   ampm = c(\"AM\", \"PM\"),   includeZonar = TRUE,   cutoff_min = -25,   cutoff_max = 60,   rp_database = \"SY_Live_RP\",   os_database = \"Onscreen021919\",   rp_odbc_name = Sys.getenv(\"RP_ODBC_NAME\"),   uncoveredURL =     \"https://docs.google.com/spreadsheets/d/1OcpCGaPKZYaeazNuPjkzyWT8c-HgcFvMbzObuA-lZ50\",   mailTo = c(\"izahn@bostonpublicschools.org\", \"drosengard@bostonpublicschools.org\",     \"ezanzerkia@bostonpublicschools.org\"),   mailFrom = \"izahn@bostonpublicschools.org\",   TZ = \"America/New_York\",   test = FALSE )"},{"path":"/reference/otp_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a on-time performance report — otp_report","text":"date Character vector length 1 giving date YYY-MM-DD format. ampm Character vector length 1, either \"\", \"PM\", use specify morning evening OTP report. includeZonar Logical vector length 1. TRUE zonar schedule data retrieved used OTP calculations. cutoff_min numeric vector length one giving minimum delay time minutes considered valid trip arrival. Usually negative value, e.g., -25 . cutoff_max numeric vector length one giving maximum delay time minutes considered vlid trip arrival. Usuall positive relatively large, e.g., 60 . rp_database Name RP database connect . Retrieved RP_DATABASE environment variable default can overridden , see RVersatransRP package details. os_database Name Onscreen database connect . rp_odbc_name Name Windows ODBC data source use. Retrieved RP_ODBC_NAME environment variable default can overridden , see RVersatransRP package details. uncoveredURL URL google sheet containing list uncovered trips. Must contain columns named \"Date\", \"/PM\", \"Route Set\", \"Bus\". mailTo Character vector email addresses send notifications . mailFrom GMail address used send notification emails. TZ timezone used database server. test Logical vector length one indicating whether pull abbreviated test data set. Even time needed test function long.","code":""},{"path":"/reference/otp_report.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate a on-time performance report — otp_report","text":"TODO","code":""},{"path":"/reference/otp_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a on-time performance report — otp_report","text":"","code":"otp <- zonar_otp_report(\"2023-02-14\", ampm = \"AM\", test = TRUE) #> Error in zonar_otp_report(\"2023-02-14\", ampm = \"AM\", test = TRUE): could not find function \"zonar_otp_report\" dplyr::glimpse(otp) #> Error in dplyr::glimpse(otp): object 'otp' not found"},{"path":"/reference/rp_connect.html","id":null,"dir":"Reference","previous_headings":"","what":"Connect to RP database — rp_connect","title":"Connect to RP database — rp_connect","text":"Establish connection Versatrans Routing Planning database using DBI/odbc packages R.","code":""},{"path":"/reference/rp_connect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Connect to RP database — rp_connect","text":"","code":"rp_connect(   rp_odbc_name = Sys.getenv(\"RP_ODBC_NAME\"),   database = Sys.getenv(\"RP_DATABASE\"),   TZ = Sys.timezone() )"},{"path":"/reference/rp_connect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Connect to RP database — rp_connect","text":"rp_odbc_name Name Windows ODBC data source use. Retrieved RP_ODBC_NAME environment variable default can overridden , see details. database Name default database connect . Retrieved RP_DATABASE environment variable default can overridden , see details. TZ timezone used database server.","code":""},{"path":"/reference/rp_connect.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Connect to RP database — rp_connect","text":"must set ODBC data source Versatrans RP database. must connected BPS network (e.g., via VPN remote). See https://support.microsoft.com/en-us/office/administer-odbc-data-sources-b19f856b-5b9b-48c9-8b93-07484bfab5a7 #' Connection parameters rp_odbc_name database usually specified .Renviron file, see https://support.posit.co/hc/en-us/articles/360047157094-Managing-R--Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf--repos-conf familiar seting envionment variables R.","code":""},{"path":"/reference/rp_connect.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Connect to RP database — rp_connect","text":"","code":"conn <- rp_connect() {tbls <- DBI::dbListTables(conn); head(tbls)} #> [1] \"Abbreviation\"        \"Accommodations\"      \"Alias\"               #> [4] \"aspnet_Applications\" \"aspnet_Membership\"   \"aspnet_Paths\"        DBI::dbDisconnect(conn)"},{"path":"/reference/rp_get_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve RP table — rp_get_table","title":"Retrieve RP table — rp_get_table","text":"Retrieve RP table","code":""},{"path":"/reference/rp_get_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve RP table — rp_get_table","text":"","code":"rp_get_table(   conn = NULL,   tablename = c(\"v_crosstab_student_calc\", \"StudentInfoFields\"),   database = Sys.getenv(\"RP_DATABASE\") )"},{"path":"/reference/rp_get_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve RP table — rp_get_table","text":"conn DBI connection use, see rp_connect. tablename name table retrieve database Name default database connect . Retrieved RP_DATABASE environment variable default can overridden , see details.","code":""},{"path":[]},{"path":"/reference/rp_guess_dsn.html","id":null,"dir":"Reference","previous_headings":"","what":"Guess DNS name — rp_guess_dsn","title":"Guess DNS name — rp_guess_dsn","text":"Guess DNS name","code":""},{"path":"/reference/rp_guess_dsn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Guess DNS name — rp_guess_dsn","text":"","code":"rp_guess_dsn()"},{"path":"/reference/rp_report_student_monitor.html","id":null,"dir":"Reference","previous_headings":"","what":"Create student monitor report — rp_report_student_monitor","title":"Create student monitor report — rp_report_student_monitor","text":"Equivalent Import/Export => Student => Monitors student file","code":""},{"path":"/reference/rp_report_student_monitor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create student monitor report — rp_report_student_monitor","text":"","code":"rp_report_student_monitor(   conn = NULL,   database = Sys.getenv(\"RP_DATABASE\"),   format = c(\"long\", \"wide\") )"},{"path":"/reference/rp_report_student_monitor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create student monitor report — rp_report_student_monitor","text":"conn DBI connection use, see rp_connect. database Name default database connect . Retrieved RP_DATABASE environment variable default can overridden , see details. format Character vector length one specifying data formatted. \"long\" (default) return separate rows weekday/pickup/dropoff. \"wide\" return separate columns weekday/pickup/dropoff.","code":""},{"path":"/reference/rp_report_student_monitor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create student monitor report — rp_report_student_monitor","text":"","code":"student_monitor <- rp_report_student_monitor()  ## data fields: dplyr::glimpse(student_monitor[0, ]) #> Rows: 0 #> Columns: 13 #> $ RecordID               <int>  #> $ `Student ID`           <chr>  #> $ `Last, First`          <chr>  #> $ `Program Description`  <chr>  #> $ `INFO WC`              <chr>  #> $ `INFO NEED MONITOR`    <chr>  #> $ `School Abbrev`        <chr>  #> $ `School Anchor Abbrev` <chr>  #> $ `School Name`          <chr>  #> $ Day                    <chr>  #> $ Shift                  <chr>  #> $ Route                  <chr>  #> $ Bus                    <chr>   ## example pickup data: dplyr::glimpse( dplyr::select(   student_monitor,   -dplyr::contains(\"ID\"), -dplyr::contains(\"Last\"), -dplyr::contains(\"First\"))) #> Rows: 207,702 #> Columns: 10 #> $ `Program Description`  <chr> \"DR DOOR FULL DAY\", \"DR DOOR FULL DAY\", \"DR DOO… #> $ `INFO WC`              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ `INFO NEED MONITOR`    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ `School Abbrev`        <chr> \"0335\", \"0335\", \"0420\", \"0420\", \"0420\", \"0420\",… #> $ `School Anchor Abbrev` <chr> \"0335\", \"0335\", \"0420\", \"0420\", \"0420\", \"0420\",… #> $ `School Name`          <chr> \"Farr Acad\", \"Farr Acad\", \"LANDMARK HS\", \"LANDM… #> $ Day                    <chr> NA, NA, \"M\", \"M\", \"T\", \"T\", \"W\", \"W\", \"H\", \"H\",… #> $ Shift                  <chr> \"Pickup\", \"Dropoff\", \"Pickup\", \"Dropoff\", \"Pick… #> $ Route                  <chr> NA, NA, \"04201451\", \"04200451\", \"04201451\", \"04… #> $ Bus                    <chr> NA, NA, \"7D036\", \"7D036\", \"7D036\", \"7D036\", \"7D…"}]
