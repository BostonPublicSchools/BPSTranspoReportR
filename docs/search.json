[{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Ista Zahn. Maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Zahn (2023). BPSTranspoReportR: Generate reports needed BPS Transportation. R package version 0.1.0.","code":"@Manual{,   title = {BPSTranspoReportR: Generate reports needed by BPS Transportation},   author = {Ista Zahn},   year = {2023},   note = {R package version 0.1.0}, }"},{"path":"/index.html","id":"bpstransporeportr","dir":"","previous_headings":"","what":"Generate reports needed by BPS Transportation","title":"Generate reports needed by BPS Transportation","text":"goal BPSTranspoReportR provide easy use functions generating reports data summaries data stored Versatrans RP/Onscreen, Zonar.","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Generate reports needed by BPS Transportation","text":"BPSTranspoReportR currently available GitHub page. can development version BPSTranspoReportR GitHub :","code":"# install.packages(\"remotes\") ## if you don't have remotes installed already remotes::install_github(c(\"BostonPublicSchools/RVersatransRP\",                           \"BostonPublicSchools/RZonar\",                           \"BostonPublicSchools/BPSTranspoReportR\")"},{"path":"/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Generate reports needed by BPS Transportation","text":"basic example shows retrieve student monitor file Versatrans RP database:","code":"library(BPSTranspoReportR)  ## run report for yesterday student_monitor <- otp_report(as.character(Sys.Date() -1)) ## OTP data structure: dplyr::glimpse(student_monitor[0, ]) #> Rows: 0 #> Columns: 34 #> $ RPVehicle           <chr>  #> $ RPRoute             <chr>  #> $ ExpectedTime        <dttm>  #> $ Arrival             <dttm>  #> $ delayTimeCombined   <int>  #> $ ActualTime          <dttm>  #> $ zonarActualTime     <dttm>  #> $ DelayTime           <int>  #> $ zonarDelayTime      <int>  #> $ Direction           <chr>  #> $ AnchorAbbrev        <chr>  #> $ Date                <dttm>  #> $ AMPM                <chr>  #> $ OvernightGarage     <chr>  #> $ Names               <chr>  #> $ RouteName           <chr>  #> $ load                <int>  #> $ Days                <chr>  #> $ RouteSetName        <chr>  #> $ excludedShuttlesEtc <lgl>  #> $ OriginalRPVehicle   <chr>  #> $ Zone                <chr>  #> $ zonarCategory       <chr>  #> $ zonarDuration       <drtn>  secs #> $ inZonar             <lgl>  #> $ inOnscreen          <lgl>  #> $ arrivalTimeSource   <chr>  #> $ arrivalInWindow     <lgl>  #> $ zoneInZonar         <lgl>  #> $ OSVehicleOverride   <lgl>  #> $ Uncovered           <lgl>  #> $ cutoff_min          <dbl>  #> $ cutoff_max          <dbl>  #> $ TripCategory        <chr>"},{"path":"/index.html","id":"credentials-and-other-private-information","dir":"","previous_headings":"","what":"Credentials and other private information","title":"Generate reports needed by BPS Transportation","text":"Usernames, passwords, private information usually needed order access data sources required generate reports. default retrieved environment variables. can either set system-wide, set .Renviron file described https://support.posit.co/hc/en-us/articles/360047157094-Managing-R--Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf--repos-conf. Note just convenience, can also just pass everything arguemnts function calls. set environment variables private information, make sure values checked git otherwise unintentionally exposed. environment variables consulted functions package shown table .","code":""},{"path":"/reference/otp_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a on-time performance report — otp_report","title":"Generate a on-time performance report — otp_report","text":"Retrieves combines data Zonar Versatrans generates full OTP data. full schedule OTP data returned, need summarized public reporting.","code":""},{"path":"/reference/otp_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a on-time performance report — otp_report","text":"","code":"otp_report(   date = as.character(Sys.Date()),   ampm = c(\"AM\", \"PM\"),   include_zonar = TRUE,   cutoff_min = -25,   cutoff_max = 60,   rp_database = Sys.getenv(\"RP_DATABASE\"),   os_database = Sys.getenv(\"OS_DATABASE\"),   rp_odbc_name = Sys.getenv(\"RP_ODBC_NAME\"),   uncovered_url = Sys.getenv(\"UNCOVERED_URL\"),   mail_to = strsplit(Sys.getenv(\"MAIL_TO\"), \",\")[[1]],   mail_from = Sys.getenv(\"MAIL_FROM\"),   TZ = \"America/New_York\",   test = FALSE )"},{"path":"/reference/otp_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a on-time performance report — otp_report","text":"date Character vector length 1 giving date YYY-MM-DD format. ampm Character vector length 1, either \"\", \"PM\", use specify morning evening OTP report. include_zonar Logical vector length 1. TRUE zonar schedule data retrieved used OTP calculations. cutoff_min numeric vector length one giving minimum delay time minutes considered valid trip arrival. Usually negative value, e.g., -25 . cutoff_max numeric vector length one giving maximum delay time minutes considered vlid trip arrival. Usuall positive relatively large, e.g., 60 . rp_database Name RP database connect . Retrieved RP_DATABASE environment variable default can overridden , see RVersatransRP package details. os_database Name Onscreen database connect . rp_odbc_name Name Windows ODBC data source use. Retrieved RP_ODBC_NAME environment variable default can overridden , see RVersatransRP package details. uncovered_url URL google sheet containing list uncovered trips. Must contain columns named \"Date\", \"/PM\", \"Route Set\", \"Bus\". mail_to Character vector email addresses send notifications . mail_from GMail address used send notification emails. TZ timezone used database server. test Logical vector length one indicating whether pull abbreviated test data set. Even time needed test function long.","code":""},{"path":"/reference/otp_report.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate a on-time performance report — otp_report","text":"TODO","code":""},{"path":"/reference/otp_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a on-time performance report — otp_report","text":"","code":"otp <- otp_report(\"2023-02-14\", ampm = \"AM\", test = TRUE) #> ! Using an auto-discovered, cached token. #>   To suppress this message, modify your code or options to clearly consent to #>   the use of a cached token. #>   See gargle's \"Non-interactive auth\" vignette for more details: #>   <https://gargle.r-lib.org/articles/non-interactive-auth.html> #> ℹ The googlesheets4 package is using a cached token for #>   izahn@bostonpublicschools.org. #> ✔ Reading from SY22-23 Uncovered Tracking. #> ✔ Range '2022-23 SY Uncovered Trip Data (starting 8/29)'. #> NOTE: only pulling schedule data for the first five zones; omit 'test' parameter if you want everything dplyr::glimpse(otp[0,]) #> Rows: 0 #> Columns: 34 #> $ RPVehicle           <chr>  #> $ RPRoute             <chr>  #> $ ExpectedTime        <dttm>  #> $ Arrival             <dttm>  #> $ delayTimeCombined   <int>  #> $ ActualTime          <dttm>  #> $ zonarActualTime     <dttm>  #> $ DelayTime           <int>  #> $ zonarDelayTime      <int>  #> $ Direction           <chr>  #> $ AnchorAbbrev        <chr>  #> $ Date                <dttm>  #> $ AMPM                <chr>  #> $ OvernightGarage     <chr>  #> $ Names               <chr>  #> $ RouteName           <chr>  #> $ load                <int>  #> $ Days                <chr>  #> $ RouteSetName        <chr>  #> $ excludedShuttlesEtc <lgl>  #> $ OriginalRPVehicle   <chr>  #> $ Zone                <chr>  #> $ zonarCategory       <chr>  #> $ zonarDuration       <drtn>  secs #> $ inZonar             <lgl>  #> $ inOnscreen          <lgl>  #> $ arrivalTimeSource   <chr>  #> $ arrivalInWindow     <lgl>  #> $ zoneInZonar         <lgl>  #> $ OSVehicleOverride   <lgl>  #> $ Uncovered           <lgl>  #> $ cutoff_min          <dbl>  #> $ cutoff_max          <dbl>  #> $ TripCategory        <chr>"},{"path":"/reference/rp_connect.html","id":null,"dir":"Reference","previous_headings":"","what":"Connect to RP database — rp_connect","title":"Connect to RP database — rp_connect","text":"Establish connection Versatrans Routing Planning database using DBI/odbc packages R.","code":""},{"path":"/reference/rp_connect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Connect to RP database — rp_connect","text":"","code":"rp_connect(   rp_odbc_name = Sys.getenv(\"RP_ODBC_NAME\"),   database = Sys.getenv(\"RP_DATABASE\"),   TZ = Sys.timezone() )"},{"path":"/reference/rp_connect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Connect to RP database — rp_connect","text":"rp_odbc_name Name Windows ODBC data source use. Retrieved RP_ODBC_NAME environment variable default can overridden , see details. database Name default database connect . Retrieved RP_DATABASE environment variable default can overridden , see details. TZ timezone used database server.","code":""},{"path":"/reference/rp_connect.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Connect to RP database — rp_connect","text":"must set ODBC data source Versatrans RP database. must connected BPS network (e.g., via VPN remote). See https://support.microsoft.com/en-us/office/administer-odbc-data-sources-b19f856b-5b9b-48c9-8b93-07484bfab5a7 #' Connection parameters rp_odbc_name database usually specified .Renviron file, see https://support.posit.co/hc/en-us/articles/360047157094-Managing-R--Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf--repos-conf familiar seting envionment variables R.","code":""},{"path":"/reference/rp_connect.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Connect to RP database — rp_connect","text":"","code":"conn <- rp_connect() {tbls <- DBI::dbListTables(conn); head(tbls)} #> [1] \"Abbreviation\"        \"Accommodations\"      \"Alias\"               #> [4] \"aspnet_Applications\" \"aspnet_Membership\"   \"aspnet_Paths\"        DBI::dbDisconnect(conn)"},{"path":"/reference/rp_get_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve RP table — rp_get_table","title":"Retrieve RP table — rp_get_table","text":"Retrieve RP table","code":""},{"path":"/reference/rp_get_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve RP table — rp_get_table","text":"","code":"rp_get_table(   conn = NULL,   tablename = c(\"v_crosstab_student_calc\", \"StudentInfoFields\"),   database = Sys.getenv(\"RP_DATABASE\") )"},{"path":"/reference/rp_get_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve RP table — rp_get_table","text":"conn DBI connection use, see rp_connect. tablename name table retrieve database Name default database connect . Retrieved RP_DATABASE environment variable default can overridden , see details.","code":""},{"path":[]},{"path":"/reference/rp_guess_dsn.html","id":null,"dir":"Reference","previous_headings":"","what":"Guess DNS name — rp_guess_dsn","title":"Guess DNS name — rp_guess_dsn","text":"Guess DNS name","code":""},{"path":"/reference/rp_guess_dsn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Guess DNS name — rp_guess_dsn","text":"","code":"rp_guess_dsn()"},{"path":"/reference/rp_report_student_monitor.html","id":null,"dir":"Reference","previous_headings":"","what":"Create student monitor report — rp_report_student_monitor","title":"Create student monitor report — rp_report_student_monitor","text":"Equivalent Import/Export => Student => Monitors student file","code":""},{"path":"/reference/rp_report_student_monitor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create student monitor report — rp_report_student_monitor","text":"","code":"rp_report_student_monitor(   conn = NULL,   database = Sys.getenv(\"RP_DATABASE\"),   format = c(\"long\", \"wide\") )"},{"path":"/reference/rp_report_student_monitor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create student monitor report — rp_report_student_monitor","text":"conn DBI connection use, see rp_connect. database Name default database connect . Retrieved RP_DATABASE environment variable default can overridden , see details. format Character vector length one specifying data formatted. \"long\" (default) return separate rows weekday/pickup/dropoff. \"wide\" return separate columns weekday/pickup/dropoff.","code":""},{"path":"/reference/rp_report_student_monitor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create student monitor report — rp_report_student_monitor","text":"","code":"student_monitor <- rp_report_student_monitor()  ## data fields: dplyr::glimpse(student_monitor[0, ]) #> Rows: 0 #> Columns: 13 #> $ RecordID               <int>  #> $ `Student ID`           <chr>  #> $ `Last, First`          <chr>  #> $ `Program Description`  <chr>  #> $ `INFO WC`              <chr>  #> $ `INFO NEED MONITOR`    <chr>  #> $ `School Abbrev`        <chr>  #> $ `School Anchor Abbrev` <chr>  #> $ `School Name`          <chr>  #> $ Day                    <chr>  #> $ Shift                  <chr>  #> $ Route                  <chr>  #> $ Bus                    <chr>   ## example pickup data: dplyr::glimpse( dplyr::select(   student_monitor,   -dplyr::contains(\"ID\"), -dplyr::contains(\"Last\"), -dplyr::contains(\"First\"))) #> Rows: 207,702 #> Columns: 10 #> $ `Program Description`  <chr> \"DR DOOR FULL DAY\", \"DR DOOR FULL DAY\", \"DR DOO… #> $ `INFO WC`              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ `INFO NEED MONITOR`    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ `School Abbrev`        <chr> \"0335\", \"0335\", \"0420\", \"0420\", \"0420\", \"0420\",… #> $ `School Anchor Abbrev` <chr> \"0335\", \"0335\", \"0420\", \"0420\", \"0420\", \"0420\",… #> $ `School Name`          <chr> \"Farr Acad\", \"Farr Acad\", \"LANDMARK HS\", \"LANDM… #> $ Day                    <chr> NA, NA, \"M\", \"M\", \"T\", \"T\", \"W\", \"W\", \"H\", \"H\",… #> $ Shift                  <chr> \"Pickup\", \"Dropoff\", \"Pickup\", \"Dropoff\", \"Pick… #> $ Route                  <chr> NA, NA, \"04201451\", \"04200451\", \"04201451\", \"04… #> $ Bus                    <chr> NA, NA, \"7D036\", \"7D036\", \"7D036\", \"7D036\", \"7D…"}]
