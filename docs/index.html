<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides R functions for generating On-time performance and other reports.">
<title>Generate reports needed by BPS Transportation • BPSTranspoReportR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Generate reports needed by BPS Transportation">
<meta property="og:description" content="Provides R functions for generating On-time performance and other reports.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">BPSTranspoReportR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="bpstransporeportr">BPSTranspoReportR<a class="anchor" aria-label="anchor" href="#bpstransporeportr"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of BPSTranspoReportR is to provide easy to use functions for generating reports and data summaries from data stored in Versatrans RP/Onscreen, and Zonar.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>BPSTranspoReportR is currently available from our <a href="https://github.com/BostonPublicSchools/BPSTranspoReportR" class="external-link">GitHub page</a>. You can the development version of BPSTranspoReportR from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("remotes") ## if you don't have remotes installed already</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="fu">c</span>(<span class="st">"BostonPublicSchools/RVersatransRP"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"BostonPublicSchools/RZonar"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"BostonPublicSchools/BPSTranspoReportR"</span>)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example which shows you how to retrieve the student monitor file from the Versatrans RP database:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">BPSTranspoReportR</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## run report for yesterday</span></span>
<span><span class="va">student_monitor</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/otp_report.html">otp_report</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## OTP data structure:</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">student_monitor</span><span class="op">[</span><span class="fl">0</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 0</span></span>
<span><span class="co">#&gt; Columns: 34</span></span>
<span><span class="co">#&gt; $ RPVehicle           &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ RPRoute             &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ ExpectedTime        &lt;dttm&gt; </span></span>
<span><span class="co">#&gt; $ Arrival             &lt;dttm&gt; </span></span>
<span><span class="co">#&gt; $ delayTimeCombined   &lt;int&gt; </span></span>
<span><span class="co">#&gt; $ ActualTime          &lt;dttm&gt; </span></span>
<span><span class="co">#&gt; $ zonarActualTime     &lt;dttm&gt; </span></span>
<span><span class="co">#&gt; $ DelayTime           &lt;int&gt; </span></span>
<span><span class="co">#&gt; $ zonarDelayTime      &lt;int&gt; </span></span>
<span><span class="co">#&gt; $ Direction           &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ AnchorAbbrev        &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ Date                &lt;dttm&gt; </span></span>
<span><span class="co">#&gt; $ AMPM                &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ OvernightGarage     &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ Names               &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ RouteName           &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ load                &lt;int&gt; </span></span>
<span><span class="co">#&gt; $ Days                &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ RouteSetName        &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ excludedShuttlesEtc &lt;lgl&gt; </span></span>
<span><span class="co">#&gt; $ OriginalRPVehicle   &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ Zone                &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ zonarCategory       &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ zonarDuration       &lt;drtn&gt;  secs</span></span>
<span><span class="co">#&gt; $ inZonar             &lt;lgl&gt; </span></span>
<span><span class="co">#&gt; $ inOnscreen          &lt;lgl&gt; </span></span>
<span><span class="co">#&gt; $ arrivalTimeSource   &lt;chr&gt; </span></span>
<span><span class="co">#&gt; $ arrivalInWindow     &lt;lgl&gt; </span></span>
<span><span class="co">#&gt; $ zoneInZonar         &lt;lgl&gt; </span></span>
<span><span class="co">#&gt; $ OSVehicleOverride   &lt;lgl&gt; </span></span>
<span><span class="co">#&gt; $ Uncovered           &lt;lgl&gt; </span></span>
<span><span class="co">#&gt; $ cutoff_min          &lt;dbl&gt; </span></span>
<span><span class="co">#&gt; $ cutoff_max          &lt;dbl&gt; </span></span>
<span><span class="co">#&gt; $ TripCategory        &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="credentials-and-other-private-information">Credentials and other private information<a class="anchor" aria-label="anchor" href="#credentials-and-other-private-information"></a>
</h2>
<p>Usernames, passwords, and other private information will usually be needed in order to access the data sources required to generate reports. By default these are retrieved from environment variables. You can either set these system-wide, or set up an <code>.Renviron</code> file as described in <a href="https://support.posit.co/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf" class="external-link uri">https://support.posit.co/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf</a>.</p>
<p>Note that <em>this is just for convenience, you can also just pass everything as arguemnts to your function calls</em>.</p>
<p>If you do set environment variables with private information, <strong>make sure that these values are not checked into git or otherwise unintentionally exposed</strong>.</p>
<p>The environment variables consulted by functions in this package are shown in the table below.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="79%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><em>RP_ODBC_NAME</em></td>
<td>name of the ODBC data source used to connect to Versatrans databases</td>
</tr>
<tr class="even">
<td><em>RP_DATABASE</em></td>
<td>name of the RP database to use</td>
</tr>
<tr class="odd">
<td><em>OS_DATABASE</em></td>
<td>name of the Onscreen database to use</td>
</tr>
<tr class="even">
<td><em>UNCOVERED_URL</em></td>
<td>URL of a google sheet containing uncovered trips list (required)</td>
</tr>
<tr class="odd">
<td><em>MAIL_TO</em></td>
<td>comma separated list of email addresses to send notifications to. (required)</td>
</tr>
<tr class="even">
<td><em>MAIL_FROM</em></td>
<td>gmail address from which notifications should be sent (required)</td>
</tr>
<tr class="odd">
<td><em>TZ</em></td>
<td>time zone, defaults to “America/New_York”,</td>
</tr>
<tr class="even">
<td><em>CURL_SSL_BACKEND</em></td>
<td>this should always be set to “openssl” (required)</td>
</tr>
<tr class="odd">
<td><em>ZONAR_CUSTOMER</em></td>
<td>Zonar customer ID (required)</td>
</tr>
<tr class="even">
<td><em>ZONAR_USER</em></td>
<td>Zonar user name (required)</td>
</tr>
<tr class="odd">
<td><em>ZONAR_PASS</em></td>
<td>ZOnar password (required)</td>
</tr>
<tr class="even">
<td>——————</td>
<td>—————————————————————————-</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>What license is it under?</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing BPSTranspoReportR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ista Zahn <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ista Zahn.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
