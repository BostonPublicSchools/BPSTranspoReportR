
<!-- README.md is generated from README.Rmd. Please edit that file -->

# RVersatransRP

<!-- badges: start -->
<!-- badges: end -->

The goal of RVersatransRP is to provide easy to use functions for
querying and formatting data from a Versatrans Routing & Planning
database.

## Installation

RVersatransRP is currently available from our [shared Google Drive
folder](https://drive.google.com/drive/folders/1e_C8c5epf8IqcKyP4g9TzaFm1Vnlr8wM?usp=sharing).
I don’t think there is any easy way to install or update directly from
there, so you will need to download/sync this shared drive to your local
disk and install from there. Once you have downloaded/synced the drive
directory you can install this package with

``` r
remotes::install_local("<path/to/directory>")
```

Eventually we will move this package to Github so you will be able to
install the development version of RVersatransRP from \[GitHub with:

``` r
# install.packages("devtools")
devtools::install_github(".../RVersatransRP")
```

## Using without installation

So far all functions are defined in a single file,
`monitors_studet_file.R`, so you may download/sync the google drive as
instructed above and then simply source this file with

``` r
source("<path/to/directory>/monitors_student_file.R")
```

## Example

This is a basic example which shows you how to retrieve the student
monitor file from the Versatrans RP database:

``` r
library(RVersatransRP)

student_monitor <- rp_report_student_monitor(database = "Sandbox", format = "long")

## example pickup data:
dplyr::glimpse(
dplyr::select(
  student_monitor,
  -dplyr::contains("ID"), -dplyr::contains("Last"), -dplyr::contains("First")))
#> Rows: 207,702
#> Columns: 10
#> $ `Program Description`  <chr> "DR DOOR FULL DAY", "DR DOOR FULL DAY", "DR DOO…
#> $ `INFO WC`              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
#> $ `INFO NEED MONITOR`    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
#> $ `School Abbrev`        <chr> "0335", "0335", "0420", "0420", "0420", "0420",…
#> $ `School Anchor Abbrev` <chr> "0335", "0335", "0420", "0420", "0420", "0420",…
#> $ `School Name`          <chr> "Farr Acad", "Farr Acad", "LANDMARK HS", "LANDM…
#> $ Day                    <chr> NA, NA, "M", "M", "T", "T", "W", "W", "H", "H",…
#> $ Shift                  <chr> "Pickup", "Dropoff", "Pickup", "Dropoff", "Pick…
#> $ Route                  <chr> NA, NA, "04201451", "04200451", "04201451", "04…
#> $ Bus                    <chr> NA, NA, "7D036", "7D036", "7D036", "7D036", "7D…
```

Use `format = wide` for full compatibility with the monitor student file
produced by RP export:

``` r
library(RVersatransRP)

student_monitor <- rp_report_student_monitor(database = "Sandbox", format = "wide")

## example pickup data:
dplyr::glimpse(
dplyr::select(
  student_monitor,
  -dplyr::contains("ID"), -dplyr::contains("Last"), -dplyr::contains("First")))
#> Rows: 21,421
#> Columns: 26
#> $ `Program Description`  <chr> "DR DOOR FULL DAY", "DR DOOR FULL DAY", "DR DOO…
#> $ `INFO WC`              <chr> NA, NA, NA, NA, NA, NA, "WC", NA, NA, NA, NA, N…
#> $ `INFO NEED MONITOR`    <chr> NA, NA, "M", "M", NA, NA, "1", NA, "M", NA, NA,…
#> $ `School Abbrev`        <chr> "0335", "0420", NA, "0641", "0517", "0292", "06…
#> $ `School Anchor Abbrev` <chr> "0335", "0420", NA, "0641", "0517", "0292", "06…
#> $ `School Name`          <chr> "Farr Acad", "LANDMARK HS", "CENTRAL MA PREP CO…
#> $ `Mon. Pickup Bus`      <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Mon. Pickup Route`    <chr> NA, "04201451", NA, "06411451", NA, NA, "065925…
#> $ `Mon. Dropoff Bus`     <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Mon. Dropoff Route`   <chr> NA, "04200451", NA, "06419451", NA, NA, "065995…
#> $ `Tue. Pickup Bus`      <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Tue. Pickup Route`    <chr> NA, "04201451", NA, "06411451", NA, NA, "065925…
#> $ `Tue. Dropoff Bus`     <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Tue. Dropoff Route`   <chr> NA, "04200451", NA, "06419451", NA, NA, "065995…
#> $ `Wed. Pickup Bus`      <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Wed. Pickup Route`    <chr> NA, "04201451", NA, "06411451", NA, NA, "065925…
#> $ `Wed. Dropoff Bus`     <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Wed. Dropoff Route`   <chr> NA, "04200451", NA, "06419451", NA, NA, "065995…
#> $ `Thu. Pickup Bus`      <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Thu. Pickup Route`    <chr> NA, "04201451", NA, "06411451", NA, NA, "065925…
#> $ `Thu. Dropoff Bus`     <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Thu. Dropoff Route`   <chr> NA, "04200451", NA, "06419451", NA, NA, "065975…
#> $ `Fri. Pickup Bus`      <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Fri. Pickup Route`    <chr> NA, "04201451", NA, "06411451", NA, NA, "065925…
#> $ `Fri. Dropoff Bus`     <chr> NA, "7D036", NA, "MS012", NA, NA, "WB960", "7D0…
#> $ `Fri. Dropoff Route`   <chr> NA, "04200451", NA, "06419451", NA, NA, "065995…
```
